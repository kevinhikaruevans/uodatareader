<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            display: flex;
            width: calc(44px * 8 * 3);
            height: calc(44px * 8 * 3);
            flex-wrap: wrap;
            margin: 0 auto;
            transform: rotate(45deg) scale(0.6);
        }
        div {
            width: calc(44px * 8);
            height: calc(44px * 8);
            display: flex;
            flex-wrap: wrap;
        }
        img {
            transform: rotate(-45deg) scale(1.4);
            display: block;
        }
    </style>
    <script>
        let y = ~~(2523 / 8) - 1;
        let x = ~~(3787 / 8) - 1;

        let map = [
            Array(3).fill(null),
            Array(3).fill(null),
            Array(3).fill(null)
        ];

        let ready = 0;

        function render() {
            let df = document.createDocumentFragment();

            for(let i in map) {
                for(let n in map[i]) {
                    const block = document.createElement('div');

                    for(let s in map[i][n]) {
                        const item = document.createElement('img');
                        item.src = `http://107.161.24.129:2590/land?id=${map[i][n][s].ID}`;

                        block.appendChild(item);
                    }

                    df.appendChild(block);
                }
            }

            document.body.appendChild(df);
        }

        for(let i = 0; i < 3; i ++) {
            for(let n = 0; n < 3; n++) {
                console.log(y+i, x+i);
                const request = window.fetch(`http://107.161.24.129:2590/map?y=${y+i}&x=${x+n}`)
                request
                    .then(result => result.json())
                    .then(result => {
                        map[i][n] = result;
                        ready++;

                        if(ready === 9) {
                            render();
                        }
                    })
            }
        }
    </script>
</head>
<body>

</body>
</html>